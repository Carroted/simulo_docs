"use strict";(self.webpackChunksimulo_docs=self.webpackChunksimulo_docs||[]).push([[4306],{692:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=r(4848),t=r(8453);const a={},s="Platformer",l={id:"samples/components/platformer",title:"Platformer",description:"Here's an example of a simple platformer parkour with components:",source:"@site/docs/samples/components/platformer.mdx",sourceDirName:"samples/components",slug:"/samples/components/platformer",permalink:"/docs/samples/components/platformer",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"samplesSidebar",previous:{title:"Multi-File",permalink:"/docs/samples/components/multifile"},next:{title:"Resetting The Scene",permalink:"/docs/samples/reset"}},p={},c=[];function i(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"platformer",children:"Platformer"}),"\n",(0,o.jsx)(n.p,{children:"Here's an example of a simple platformer parkour with components:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-lua",children:'reset(); -- Add `reset` function from the samples so this works\n\n-- Add box for player\n\nlocal player = Scene:add_box({\n    name = "player",\n    position = vec2(2, -19.5),\n    size = vec2(0.5, 0.5),\n    is_static = false,\n    color = 0xa0a0ff,\n});\n\nprint(player.guid);\n\nlocal hash = Scene:add_component({\n    name = "Player Component",\n    id = "@amytimed/test/player_component",\n    version = "0.2.0",\n    code = [[\n        local speed = 5;\n        local jump_force = 5;\n        local parkour_x = 10;\n        local parkour_y = -19;\n        local parkour_size_x = 0.9;\n        local parkour_gap = 5;\n        local parkour_aa_e = 0;\n\n        function on_start()\n            print("start!!");\n            spawn_parkour();\n        end;\n\n        function on_update()\n            local current_vel = self:get_linear_velocity();\n\n            local vel = vec2(0, current_vel.y);\n\n            if Input:key_pressed("D") then\n                vel.x = speed;\n            end;\n            if Input:key_pressed("A") then\n                vel.x = -speed;\n            end;\n            if Input:key_just_pressed("W") then\n                vel.y = jump_force;\n            end;\n\n            if (vel.x < 0 and current_vel.x > vel.x) or (vel.x > 0 and current_vel.x < vel.x) then\n                self:set_linear_velocity(vec2(vel.x, vel.y));\n            elseif vel.y > 0 then\n                self:set_linear_velocity(vec2(current_vel.x, vel.y));\n            end;\n\n            self:set_angle(0);\n\n            if self:get_position().x > parkour_x - 10 then\n                spawn_parkour();\n            end;\n        end;\n\n        function spawn_parkour()\n            for i=0,2 do\n                Scene:add_box({\n                    position = vec2(parkour_x, parkour_y),\n                    size = vec2(parkour_size_x, 0.2),\n                    color = 0xe5d3b9,\n                    is_static = true,\n                    --name = "Light"\n                });\n\n                if math.random(1, 5) == 4 then\n                    Scene:add_box({\n                        position = vec2(parkour_x + (parkour_size_x / 2), parkour_y + 1),\n                        size = vec2(0.1, 1.),\n                        color = 0xe5d3b9,\n                        is_static = true,\n                    });\n                end;\n\n                if math.random(1, 5) == 4 then\n                    Scene:add_box({\n                        position = vec2(parkour_x + (parkour_gap / 2), parkour_y + 6 + parkour_aa_e),\n                        size = vec2(0.1, 4.),\n                        color = 0xe5d3b9,\n                        is_static = true,\n                    });\n                end;\n\n                parkour_x += parkour_gap;\n                parkour_gap *= 1.001;\n                parkour_size_x /= 1.01;\n                parkour_aa_e += 0.005;\n                parkour_y += math.random(-0.5 - parkour_aa_e, 1.5 - parkour_aa_e);\n            end;\n        end;\n    ]]\n});\n\nplayer:add_component(hash);\n\nprint(hash);\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var o=r(6540);const t={},a=o.createContext(t);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);